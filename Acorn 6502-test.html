<html><!-- 
    Teletext Character Set
    Galax 2015 http://galax.xyz
    
    MODE7GX3.TTF font by Galax 2014 - based on ModeSeven, created in 1998 by Andrew Bulhak
-->
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>ACORN SCREEN TEST</title>
<link rel="stylesheet" href="TELETEXT.CSS">
<style>
.sep {
    line-height: 120%;
}
</style>
</head>

<body>

<h2>6502 Acorn Atom Emulation</h2>

<table><tbody>
<tr>
<td class="teletext">
<div id=VDU class="teletext">
Error        
</div>
</td></tr></tbody>
</table>

<table border="0">
 <tr>
	 <td><b>The Monitor</b></td>
 </tr>


 <tr>
	 <td><textarea id="monitor" rows=12 cols="40"></textarea> </td>
	 <td>
	 <textarea id="status" rows="2" cols="50">STATUS</textarea>
	 <textarea id="dump1" rows="10" cols="50">0000 00</textarea>
	 </td>
 </tr>

 <tr>
	 <td>
	 </td>
	 <td></td>
 </tr>

</table>

<script>
	const MEMSIZE =1024 * 64 	
	const mem = new Array(MEMSIZE)
	
	function clr_memory(){		
	var i,j; 
		for (i=0; i<MEMSIZE; i++) { 
			mem[i] = 0; 
		}
	}

	function VDUtotext() {
		const cset= "@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^-" +
					" !\"#$%\&'()*+,-./0123456789:;<=>?" 
					
		var i,j,str=""
		for (j=0; j<16;j++) {
			for (i=0;i<32;i++) {
				var ch = mem[0x8000+j*32+i]
				if (ch>=0 && ch<=0x3f) 	
					str = str + cset[ch]
				else
				if (ch>=0x80 && ch<=0xbf) 	
					str = str + "<span class=\"black whitebg\">"+cset[ch-0x80]+"</span>"
				else
				if (ch>=0x40 && ch<=0x7f) 	
					str = str + "<span class=\"white blackbg\">&#"+
					(ch+0xe200-0x40)+";</span>"
				else
				if (ch>=0xc0 && ch<=0xff) 	
					str = str + "<span class=\"yellow blackbg\">&#"+
					(ch+0xe200-0xc0)+";</span>"

			}
			str = str + "\n"
		}
		return str
	}
	
		/* screen test */
	clr_memory()
	for (i=0; i<=255; i++) mem[0x8000+i]=i;
	for (i=0; i<=255; i++) mem[0x8100+i]=0;
	
	document.getElementById("VDU").innerHTML =  VDUtotext()

</script>

</body>
</html>